
//: Declare String Begin

/*: "snap_img" :*/
fileprivate let str_workData:String = "snap_to remove"
fileprivate let str_matchValue:[Character] = ["i","m","g"]

/*: "bg_shouye_misanguang_default" :*/
fileprivate let str_equalTableContent:[Character] = ["b","g","_","s","h","o","u","y","e","_","m","i","s","a","n","g","u","a","n","g","_","d","e"]
fileprivate let str_titleViewData:[Character] = ["f","a","u","l","t"]

/*: "#777777" :*/
fileprivate let str_inputData:[Character] = ["#","7","7","7","7","7","7"]

/*: "#333333" :*/
fileprivate let str_nativeAtName:String = "#makemakemakemakemakemake"

/*: "Party" :*/
fileprivate let str_equalAllData:String = "Partypoint layer manager return"

/*: "Popular" :*/
fileprivate let str_changeValue:String = "beauty"
fileprivate let str_willText:[Character] = ["o","p","u","l","a","r"]

/*: "Nearby" :*/
fileprivate let str_keyTableTitle:[Character] = ["N","e","a","r","b","y"]

/*: "New" :*/
fileprivate let str_dragText:String = "none contentNew"

/*: "btn_popular_search_nor" :*/
fileprivate let str_gestureTitle:String = "btn_poname type or float model"
fileprivate let str_movieData:String = "top"
fileprivate let str_equalName:[Character] = ["_","s","e","a","r","c","h","_","n","o","r"]

/*: "icon_live_nor" :*/
fileprivate let str_requestAppearData:[Character] = ["i","c","o","n","_"]
fileprivate let str_infoWhiteContent:String = "lirange"

/*: "btn_popular_ranking_nor" :*/
fileprivate let str_labValue:[Character] = ["b","t","n","_","p","o","p","u","l","a","r","_","r","a","n"]
fileprivate let str_miniName:[Character] = ["k","i","n","g","_","n","o","r"]

/*: "Congratulation on your chance to join the Star Plan !" :*/
fileprivate let str_titleValue:[UInt8] = [0x43,0x6f,0x6e,0x67,0x72,0x61,0x74,0x75,0x6c,0x61,0x74,0x69,0x6f,0x6e,0x20,0x6f,0x6e,0x20,0x79,0x6f,0x75,0x72,0x20,0x63,0x68,0x61,0x6e,0x63,0x65,0x20,0x74,0x6f,0x20,0x6a,0x6f,0x69,0x6e,0x20,0x74,0x68,0x65,0x20,0x53,0x74,0x61,0x72,0x20,0x50,0x6c,0x61,0x6e,0x20,0x21]

/*: "No, thanks" :*/
fileprivate let str_statusData:String = "return false nameNo, t"
fileprivate let str_tableValue:[Character] = ["h","a","n","k","s"]

/*: "Find out more" :*/
fileprivate let str_upValue:String = "self reasonFind "
fileprivate let str_voiceData:String = "ORE"

/*: "clickStarProjectpop-upsCancel" :*/
fileprivate let str_makeData:String = "clpick"
fileprivate let str_packageData:String = "ojwindowc"
fileprivate let str_modelConstraintTitle:[Character] = ["t","p","o","p","-","u","p","s","C","a","n","c","e","l"]

/*: "clickStarProjectpop-upsFindoutmore" :*/
fileprivate let str_toImageText:[UInt8] = [0x63,0x6c,0x69,0x63,0x6b,0x53,0x74,0x61,0x72,0x50,0x72,0x6f,0x6a,0x65,0x63,0x74,0x70,0x6f,0x70,0x2d,0x75,0x70,0x73,0x46,0x69,0x6e,0x64,0x6f,0x75,0x74,0x6d,0x6f,0x72,0x65]

/*: "Allow %@ to send you notifications?" :*/
fileprivate let str_addDoingTitle:[UInt8] = [0x41,0x6c,0x6c,0x6f,0x77,0x20,0x25,0x40,0x20,0x74,0x6f,0x20,0x73,0x65,0x6e,0x64,0x20,0x79,0x6f,0x75,0x20,0x6e,0x6f,0x74,0x69,0x66,0x69,0x63,0x61,0x74,0x69,0x6f,0x6e,0x73,0x3f]

/*: "Cancel" :*/
fileprivate let str_randomTitle:[Character] = ["C","a","n","c","e","l"]

/*: "Settings" :*/
fileprivate let str_cancelTitle:String = "Settmenu extension view"

/*: _ :*/
fileprivate let str_sData:String = "_"

/*: "male" :*/
fileprivate let str_positionData:[UInt8] = [0x65,0x6c,0x61,0x6d]

/*: "female" :*/
fileprivate let str_dismissValue:[Character] = ["f","e","m","a","l","e"]

/*: "icon_home_newwindow" :*/
fileprivate let str_bottomValue:[Character] = ["i","c","o","n","_","h","o","m","e","_","n","e","w"]
fileprivate let str_pinValue:[Character] = ["w","i","n","d","o","w"]

//: Declare String End

// __DEBUG__
// __CLOSE_PRINT__
//
//  EquilateralViewDelegate.swift
//  AbroadTalking
//
//  Created by Hemming on 2022/1/20.
//

//: import JXPagingView
import JXPagingView
//: import JXSegmentedView
import JXSegmentedView
//: import UIKit
import UIKit

//: class TalkingSocialViewController: TalkingBaseViewController {
class EquilateralViewDelegate: PropertyViewController {
	var viewOff: Bool = false
	var mainContentCount: Double = 74.9
	var listGiftArray: [AnyHashable] = []
	var viewDictionary: [AnyHashable: String] = [:]
	var pageOpen: Bool = true
	var responseCount: Int = 48
	var textName: String = "row"
	var sonogramArray: [AnyHashable] = []
	var statusSendDictionary: [AnyHashable: String] = [:]
	var cellNoEnable: Bool = false
	var imageQuantity: Double = 52.0
	var buttonArray: [AnyHashable] = []
	var listDictionary: [AnyHashable: String] = [:]

    var valueImageView: UIImageView?
    //: private let segmentedDataSource = JXSegmentedTitleDataSource()
    private let segmentedDataSource = JXSegmentedTitleDataSource()
    //: private var  isNearbyShow = false
    private var isNearbyShow = false
    //: var  seleteIndex = 1
    var seleteIndex = 1
    //: private var liveTipsTimer: Timer?
    private var liveTipsTimer: Timer? /// 头像动画timer

    //: override func viewDidAppear(_ animated: Bool) {
    override func viewDidAppear(_ animated: Bool) {
        //: super.viewDidAppear(animated)
        super.viewDidAppear(animated)
        //: GiftFloatViewManager.shared.activeWhenShow()
        UpViewManager.shared.appShow()

	}

    //: override func viewDidDisappear(_ animated: Bool) {
    override func viewDidDisappear(_ animated: Bool) {
        //: super.viewDidDisappear(animated)
        super.viewDidDisappear(animated)
        //: GiftFloatViewManager.shared.stopWhenDismiss()
        UpViewManager.shared.textPlace()
    
            if (self.supportedInterfaceOrientations == .portraitUpsideDown) && (self.inputAccessoryViewController != nil) {
                //: SWIFT_CUSTOM_DANGER_File_Call
                let constraintMake = UpwardlyController()

            
            
            constraintMake.existentPicOpen = { [self] contentViewSwitch in
            self.pageOpen = contentViewSwitch
            
            var constraintMake = animated
            constraintMake = !constraintMake
            if constraintMake != self.pageOpen {
                self.pageOpen = constraintMake
            }
            
                self.pageOpen = true
                self.pageOpen = true
            return self.pageOpen
            }
            constraintMake.superiorInterval = { [self] observerQuantity in
            self.responseCount = observerQuantity
            
            var constraintMake = self.seleteIndex
            constraintMake &*= 5
            if constraintMake > self.responseCount {
                self.responseCount = constraintMake
            }
            
            return self.responseCount
            }
            constraintMake.mentalFacultyLocationContent = { [self] tableText in
            self.textName = tableText
            
            return self.textName
            }
            constraintMake.photoArray = { [self] freeArray in
            self.sonogramArray = freeArray
            
            guard var value = self.sonogramArray as? [String] else {
                return nil
            }
            return value
            }
            constraintMake.beautyDictionary = { [self] windowDictionary in
            self.statusSendDictionary = windowDictionary
            
            guard var value = self.statusSendDictionary as? [String: String] else {
                return nil
            }
            return value
            }
                self.navigationController?.pushViewController(constraintMake.self, animated: true)
            }

	}

    //: override func viewDidLoad() {
    override func viewDidLoad() {
        //: super.viewDidLoad()
        super.viewDidLoad()
        //: self.hideNavi = true
        self.hideNavi = true
        //: self.setupSubviews()
        self.loadBack()
        //: self.setupSubViewsConstraint()
        self.setupModelSwaddlingClothesConstraint()
        //: self.addNotification()
        self.dragSub()
        //: self.func__checkStarPlanNeedShow()
        self.dataDoingFinish()
        //: self.func__turnOnSystemNotification()
        self.titleUp()
        //: self.pushIsClubVideo()
        self.nextVideo()

        valueImageView = UIImageView(frame: self.view.bounds.intersection(CGRect(x: CGFloat(Double(self.view.frame.origin.y)), y: CGFloat(0), width: CGFloat(0), height: CGFloat(0))))
        if let valueImageView = valueImageView {
            self.valueImageView?.image = UIImage(named: (String(str_workData.prefix(5)) + String(str_matchValue)))
            if (valueImageView.layer.isDoubleSided != true) && (valueImageView.layer.isHidden != false) {
                //: SWIFT_CUSTOM_DANGER
                self.view.addSubview(valueImageView)
            }
        }
    
            if ((liveBtn.inputAssistantItem.trailingBarButtonGroups.count == 8) && (liveBtn.inputAssistantItem.leadingBarButtonGroups.count == 5)) && (liveBtn.layer.contentsRect.size.width != 1) {
                //: SWIFT_CUSTOM_DANGER_File_Call
                let saveData = UpwardlyView()
            saveData.tipTotal = self.seleteIndex

            saveData.viewUserDoing = { [self] contentViewSwitch in
            self.viewOff = contentViewSwitch
            
            var saveData = isNearbyShow
            saveData = false
            if saveData != self.viewOff {
                self.viewOff = saveData
            }
            
            return self.viewOff
            }
            saveData.valueInterval = { [self] mSayMagnitude in
            self.mainContentCount = mSayMagnitude
            
            return self.mainContentCount
            }
            saveData.nameArray = { [self] freeArray in
            self.listGiftArray = freeArray
            
            guard var value = self.listGiftArray as? [String] else {
                return nil
            }
            return value
            }
            saveData.bottomDictionary = { [self] windowDictionary in
            self.viewDictionary = windowDictionary
            
            guard var value = self.viewDictionary as? [String: String] else {
                return nil
            }
            return value
            }
                liveBtn.addSubview(saveData)
            }

	}

    //: deinit {
    deinit {
        //: NotificationCenter.default.removeObserver(self)
        NotificationCenter.default.removeObserver(self)
        //: stop_liveTipsTimer()
        reinIn()
    }

    // MARK: - Lazy load

    //: private lazy var bottomImgView: UIImageView = {
    private lazy var bottomImgView: UIImageView = {
        //: let imgV = UIImageView(image: UIImage.outsideText(name: "bg_shouye_misanguang_default"))
        let imgV = UIImageView(image: UIImage.outsideText(name: (String(str_equalTableContent) + String(str_titleViewData))))
        //: imgV.isUserInteractionEnabled = false
        imgV.isUserInteractionEnabled = false
        //: return imgV
        return imgV
        //: }()
    }()

    //: private lazy var categoryView: JXSegmentedView = {
    private lazy var categoryView: JXSegmentedView = {
        //: let segmentedView = JXSegmentedView.init(frame: CGRect.init(x: 0, y: StatusBarHeight, width: ScreenWidth, height: NavigationBarHeight))
        let segmentedView = JXSegmentedView(frame: CGRect(x: 0, y: a_limitRecordScreenName, width: a_blockValue, height: a_toText))
        //: segmentedDataSource.itemSpacing = 18
        segmentedDataSource.itemSpacing = 18
        //: segmentedDataSource.titles = titleArray
        segmentedDataSource.titles = titleArray
        //: segmentedDataSource.isTitleMaskEnabled = false
        segmentedDataSource.isTitleMaskEnabled = false
        //: segmentedDataSource.isItemSpacingAverageEnabled = false
        segmentedDataSource.isItemSpacingAverageEnabled = false
        //: segmentedDataSource.isSelectedAnimable = false
        segmentedDataSource.isSelectedAnimable = false
        //: segmentedDataSource.titleNormalColor = UIColor.init(hex: "#777777")!
        segmentedDataSource.titleNormalColor = UIColor(hex: (String(str_inputData)))!
        //: segmentedDataSource.titleSelectedColor = UIColor.init(hex: "#333333")!
        segmentedDataSource.titleSelectedColor = UIColor(hex: (str_nativeAtName.replacingOccurrences(of: "make", with: "3")))!
        //: segmentedDataSource.titleNormalFont = .pingfangFont(type: .Medium, fontSize: 16)
        segmentedDataSource.titleNormalFont = .thoughtImage(type: .Medium, fontSize: 16)
        //: segmentedDataSource.titleSelectedFont = .pingfangFont(type: .Medium, fontSize: 18)
        segmentedDataSource.titleSelectedFont = .thoughtImage(type: .Medium, fontSize: 18)
//        segmentedDataSource.itemWidthIncrement = 0
        //: let indicator = JXSegmentedIndicatorLineView()
        let indicator = JXSegmentedIndicatorLineView()
        //: indicator.indicatorWidth = 12
        indicator.indicatorWidth = 12
        //: indicator.indicatorHeight = 4
        indicator.indicatorHeight = 4
        //: indicator.verticalOffset = 4
        indicator.verticalOffset = 4
        //: indicator.lineStyle = .normal
        indicator.lineStyle = .normal
        //: indicator.indicatorColor = UIColor.init(hex: "#333333")!
        indicator.indicatorColor = UIColor(hex: (str_nativeAtName.replacingOccurrences(of: "make", with: "3")))!
        //: segmentedView.dataSource = segmentedDataSource
        segmentedView.dataSource = segmentedDataSource
        //: segmentedView.indicators = [indicator]
        segmentedView.indicators = [indicator]
        //: segmentedView.delegate = self
        segmentedView.delegate = self
        //: segmentedView.contentScrollView = pagerView.listContainerView.scrollView
        segmentedView.contentScrollView = pagerView.listContainerView.scrollView
        //: segmentedView.defaultSelectedIndex = 1
        segmentedView.defaultSelectedIndex = 1
//        segmentedView.backgroundColor = .clear
        //: if LanguageManager.shared.direction == .rightToLeft {
        if ConstraintLanguageManager.shared.direction == .rightToLeft {
            //: segmentedView.transform = CGAffineTransform(scaleX: -1, y: 1)
            segmentedView.transform = CGAffineTransform(scaleX: -1, y: 1)
        }
        //: return segmentedView
        return segmentedView
        //: }()
    }()

    //: private lazy var pagerView: JXPagingListRefreshView = {
    private lazy var pagerView: JXPagingListRefreshView = {
        //: let view = JXPagingListRefreshView.init(delegate: self, listContainerType: JXPagingListContainerType.scrollView)
        let view = JXPagingListRefreshView(delegate: self, listContainerType: JXPagingListContainerType.scrollView)
        //: view.frame = CGRect.init(x: 0, y: StatusBarHeight, width: ScreenWidth, height: ScreenHeight-TabBarViewHeight-StatusBarHeight)
        view.frame = CGRect(x: 0, y: a_limitRecordScreenName, width: a_blockValue, height: a_formalValue - a_userTitle - a_limitRecordScreenName)
//        view.pinSectionHeaderVerticalOffset = 20
        //: view.defaultSelectedIndex = 1
        view.defaultSelectedIndex = 1
        //: view.mainTableView.backgroundColor = .clear
        view.mainTableView.backgroundColor = .clear
        //: if LanguageManager.shared.direction == .rightToLeft {
        if ConstraintLanguageManager.shared.direction == .rightToLeft {
            //: view.transform = CGAffineTransform(scaleX: -1, y: 1)
            view.transform = CGAffineTransform(scaleX: -1, y: 1)
        }
        //: return view
        return view
        //: }()
    }()

    //: private lazy var titleArray: [String] = {
    private lazy var titleArray: [String] = {
        //: var array = [String]()
        var array = [String]()

        //: array.append("Party".localized)
        array.append((String(str_equalAllData.prefix(5))).localized)
        //: array.append("Popular".localized)
        array.append((str_changeValue.replacingOccurrences(of: "beauty", with: "P") + String(str_willText)).localized)
        //: array.append("Nearby".localized)
        array.append((String(str_keyTableTitle)).localized)
        //: array.append("New".localized)
        array.append((String(str_dragText.suffix(3))).localized)
        //: return array
        return array
        //: }()
    }()

    //: lazy var dataVC: [UIViewController] = {
    lazy var dataVC: [UIViewController] = {
        //: var array = [UIViewController]()
        var array = [UIViewController]()
        //: for i in titleArray {
        for i in titleArray {
            //: if i == "Party".localized {
            if i == (String(str_equalAllData.prefix(5))).localized {
                //: let partyVC = PartyListViewController.init()
                let partyVC = AlongViewDelegate()
                //: array.append(partyVC)
                array.append(partyVC)
                //: }else{
            } else {
                //: let popularVC = SocialPopularViewController.init()
                let popularVC = LeadingViewProtocol()
                //: if i == "Popular".localized {
                if i == (str_changeValue.replacingOccurrences(of: "beauty", with: "P") + String(str_willText)).localized {
                    //: popularVC.tabType = .hot
                    popularVC.tabType = .hot
                    //: } else if i == "Nearby".localized {
                } else if i == (String(str_keyTableTitle)).localized {
                    //: popularVC.tabType = .nearby
                    popularVC.tabType = .nearby
                    //: } else if i == "New".localized {
                } else if i == (String(str_dragText.suffix(3))).localized {
                    //: popularVC.tabType = .new
                    popularVC.tabType = .new
                }
                //: array.append(popularVC)
                array.append(popularVC)
            }
        }
        //: return array
        return array
        //: }()
    }()

    //: private lazy var searchBtn: UIButton = {
    private lazy var searchBtn: UIButton = {
        //: let btn = UIButton()
        let btn = UIButton()
        //: btn.setImage(UIImage.outsideText(name: "btn_popular_search_nor"), for: .normal)
        btn.setImage(UIImage.outsideText(name: (String(str_gestureTitle.prefix(6)) + "pula" + str_movieData.replacingOccurrences(of: "top", with: "r") + String(str_equalName))), for: .normal)
        //: btn.addTarget(self, action: #selector(searchButtonClick), for: .touchUpInside)
        btn.addTarget(self, action: #selector(hunt), for: .touchUpInside)
        //: return btn
        return btn
        //: }()
    }()

    //: private lazy var liveBtn: UIButton = {
    private lazy var liveBtn: UIButton = {
        //: let btn = UIButton()
        let btn = UIButton()
        //: btn.setImage(UIImage.outsideText(name: "icon_live_nor"), for: .normal)
        btn.setImage(UIImage.outsideText(name: (String(str_requestAppearData) + str_infoWhiteContent.replacingOccurrences(of: "range", with: "ve") + "_nor")), for: .normal)
        //: btn.addTarget(self, action: #selector(liveBtnClick), for: .touchUpInside)
        btn.addTarget(self, action: #selector(clickTag), for: .touchUpInside)
        //: btn.isHidden = !(MeasurementAppManager.share.appStatus == AppSkinStatus.special.rawValue && MeasurementAppManager.share.loginUserMode.sex == Gender.female.rawValue)
        btn.isHidden = !(MeasurementAppManager.share.appStatus == LabCustomReflectable.special.rawValue && MeasurementAppManager.share.loginUserMode.sex == SizeCustomReflectable.female.rawValue)
        //: return btn
        return btn
        //: }()
    }()

    //: private lazy var rankBtn: UIButton = {
    private lazy var rankBtn: UIButton = {
        //: let btn = UIButton()
        let btn = UIButton()
        //: btn.setImage(UIImage.outsideText(name: "btn_popular_ranking_nor"), for: .normal)
        btn.setImage(UIImage.outsideText(name: (String(str_labValue) + String(str_miniName))), for: .normal)
        //: btn.addTarget(self, action: #selector(rankButtonClick), for: .touchUpInside)
        btn.addTarget(self, action: #selector(cropLoad), for: .touchUpInside)
        //: return btn
        return btn
        //: }()
    }()
}

// MARK: - 开播提醒弹窗定时器

//: extension TalkingSocialViewController {
extension EquilateralViewDelegate {
    /// 跳转随机匹配
    //: private func pushIsClubVideo() {
    private func nextVideo() {
        //: if MeasurementAppManager.share.loginUserMode.jumpType == 1 && MeasurementAppManager.share.loginUserMode.sex == Gender.male.rawValue && MeasurementAppManager.share.appStatus == AppSkinStatus.normal.rawValue {
        if MeasurementAppManager.share.loginUserMode.jumpType == 1, MeasurementAppManager.share.loginUserMode.sex == SizeCustomReflectable.male.rawValue, MeasurementAppManager.share.appStatus == LabCustomReflectable.normal.rawValue {
            //: DispatchQueue.main.asyncAfter(deadline: DispatchTime.now() + 1.5) {
            DispatchQueue.main.asyncAfter(deadline: DispatchTime.now() + 1.5) {
                //: LimitPushManager.share.func__pushToRandomVideoVC(isBeginRand: false)
                LimitPushManager.share.hitOrMiss(isBeginRand: false)
            }
        }
    }

    /// 排行榜按钮点击事件
    //: @objc private func rankButtonClick() {
    @objc private func cropLoad() {
        //: let rankVC = SocialRankTabVC()
        let rankVC = MagnitudeDataSource()
        //: self.navigationController?.pushViewController(rankVC, animated: true)
        self.navigationController?.pushViewController(rankVC, animated: true)
        //: uploadRecord.uploadRecordEvent(eventID: ClickRankIngButton)
        a_textTurnName.photoOf(eventID: a_seatContent)
    }

    /// "mf/index/getConfig"请求成功后创建定时器
    //: @objc func setliveTipsTimer() {
    @objc func fromTimer() {
        //: if MeasurementAppManager.share.appUserConfigMode.liveDialogInterval > 0 &&
        if MeasurementAppManager.share.appUserConfigMode.liveDialogInterval > 0,
           //: MeasurementAppManager.share.loginUserMode.sex == Gender.female.rawValue &&
           MeasurementAppManager.share.loginUserMode.sex == SizeCustomReflectable.female.rawValue,
           //: MeasurementAppManager.share.appStatus != AppSkinStatus.special.rawValue {
           MeasurementAppManager.share.appStatus != LabCustomReflectable.special.rawValue
        {
            //: initLiveTipsTimer()
            tipsImage()
            //: liveTipsTimer?.fireDate = Date.init(timeIntervalSinceNow: TimeInterval(MeasurementAppManager.share.appUserConfigMode.liveDialogInterval))
            liveTipsTimer?.fireDate = Date(timeIntervalSinceNow: TimeInterval(MeasurementAppManager.share.appUserConfigMode.liveDialogInterval))
        }
    }

    /// 展示开闭提醒弹窗
    //: @objc func setLiveTipsPopView() {
    @objc func tipsChangeFormUnderlayResideWeltanschauung() {
        // 模态出来的webView不展示直播提醒弹窗
        //: if let currentVC = self.currentViewController() {
        if let currentVC = self.colorController() {
            //: if currentVC.isKind(of: TalkingWebViewController.self) &&
            if currentVC.isKind(of: MForefrontViewController.self),
               //: (currentVC as! TalkingWebViewController).isModal == true {
               (currentVC as! MForefrontViewController).isModal == true
            {
                //: return
                return
            }
        }

        //: if MeasurementAppManager.share.appUserConfigMode.enableLive &&
        if MeasurementAppManager.share.appUserConfigMode.enableLive,
           //: !TalkingLiveManager.shared().isLive &&
           !PropertyMManageressPushListener.giftShared().isLive,
           //: !TalkingSocketManager.shared.isTalking &&
           !SocketReactiveCompatible.shared.isTalking,
           //: !TalkingSocketManager.shared.isCalling {
           !SocketReactiveCompatible.shared.isCalling
        {
            //: TalkingPopupWindowManager.shared.startLivePopUpWindow()
            ToViewWindowManager.shared.modelStatus()
        }
    }

    /// 初始化定时器
    //: func initLiveTipsTimer() {
    func tipsImage() {
        //: let timeInterval = TimeInterval(MeasurementAppManager.share.appUserConfigMode.liveDialogInterval)
        let timeInterval = TimeInterval(MeasurementAppManager.share.appUserConfigMode.liveDialogInterval)
        //: liveTipsTimer = Timer.scheduledTimer(timeInterval: timeInterval, target: self, selector: #selector(setLiveTipsPopView), userInfo: nil, repeats: true)
        liveTipsTimer = Timer.scheduledTimer(timeInterval: timeInterval, target: self, selector: #selector(tipsChangeFormUnderlayResideWeltanschauung), userInfo: nil, repeats: true)
        //: RunLoop.current.add(liveTipsTimer!, forMode: RunLoop.Mode.common)
        RunLoop.current.add(liveTipsTimer!, forMode: RunLoop.Mode.common)
    }

    /// 停止定时器
    //: @objc func stop_liveTipsTimer() {
    @objc func reinIn() {
        //: if self.liveTipsTimer != nil {
        if self.liveTipsTimer != nil {
            //: self.liveTipsTimer?.invalidate()
            self.liveTipsTimer?.invalidate()
            //: self.liveTipsTimer?.fire()
            self.liveTipsTimer?.fire()
            //: self.liveTipsTimer = nil
            self.liveTipsTimer = nil
        }
    }

    /// 开启直播按钮点击事件
    //: @objc func liveBtnClick() {
    @objc func clickTag() {
        //: NotificationCenter.default.post(name: LIVE_NEED_OPEN_NOTIFICATION, object: nil)
        NotificationCenter.default.post(name: a_clickTitle, object: nil)
    }
}

// MARK: - Public Event

//: extension TalkingSocialViewController {
extension EquilateralViewDelegate {
    /// 检测巨星计划弹窗是否需要弹出
    //: private func func__checkStarPlanNeedShow() {
    private func dataDoingFinish() {
        //: guard MeasurementAppManager.share.showWindow == true else { return }
        guard MeasurementAppManager.share.showWindow == true else { return }
        //: MeasurementAppManager.share.showWindow = false
        MeasurementAppManager.share.showWindow = false

        // 加入巨星计划弹窗
        //: TalkingAlertShow.alert(title: nil,
        TitleAlertShow.admittance(title: nil,
                                    //: message: "Congratulation on your chance to join the Star Plan !",
                                    message: String(bytes: str_titleValue, encoding: .utf8)!,
                                    //: leftBtnTitle: "No, thanks",
                                    leftBtnTitle: (String(str_statusData.suffix(5)) + String(str_tableValue)),
                                    //: rightBtnTitle: "Find out more") {
                                    rightBtnTitle: (String(str_upValue.suffix(5)) + "out m" + str_voiceData.lowercased()))
        {
            //: TalkingAlertShow.hideAlert()
            TitleAlertShow.lastAlert()
            // 统计点击首页巨星邀请弹窗中“no,thanks”的次数
            //: TalkingAdjustManager.share.addEvent(key: "clickStarProjectpop-upsCancel")
            RegularAdjustManager.share.windowKey(key: (str_makeData.replacingOccurrences(of: "pic", with: "ic") + "StarPr" + str_packageData.replacingOccurrences(of: "window", with: "e") + String(str_modelConstraintTitle)))

            //: } rightBlock: {
        } rightBlock: {
            //: TalkingAlertShow.hideAlert()
            TitleAlertShow.lastAlert()
            // 跳转巨星计划页
            //: LimitPushManager.share.func__pushToWebVC(webViewType: .StarPlanIndex)
            LimitPushManager.share.recordIn(webViewType: .StarPlanIndex)

            // 统计点击首页巨星邀请弹窗中“Find out more”的次数
            //: TalkingAdjustManager.share.addEvent(key: "clickStarProjectpop-upsFindoutmore")
            RegularAdjustManager.share.windowKey(key: String(bytes: str_toImageText, encoding: .utf8)!)
        }
    }

    /// 检查系统通知是否开启
    //: private func func__turnOnSystemNotification() {
    private func titleUp() {
        // 有随机视频，不弹出开启推送弹窗
        //: if MeasurementAppManager.share.loginUserMode.jumpType == 1 &&
        if MeasurementAppManager.share.loginUserMode.jumpType == 1,
           //: MeasurementAppManager.share.loginUserMode.sex == Gender.male.rawValue &&
           MeasurementAppManager.share.loginUserMode.sex == SizeCustomReflectable.male.rawValue,
           //: MeasurementAppManager.share.appStatus == AppSkinStatus.normal.rawValue {
           MeasurementAppManager.share.appStatus == LabCustomReflectable.normal.rawValue
        {
            //: return
            return
        }

        //: let isShow = Defaults.bool(forKey: TalkingHomeTabTurnOnNotificationsKey)
        let isShow = a_collectionName.bool(forKey: a_inviteContent)
        //: guard isShow == false else { return }
        guard isShow == false else { return }

        //: TalkingPermissionTool.checkPushNotification { isEnable in
        PrefaceReactiveCompatible.nonsolidColour { isEnable in
            //: guard isEnable == false else { return }
            guard isEnable == false else { return }
            //: DispatchQueue.main.sync {
            DispatchQueue.main.sync {
                //: Defaults.set(true, forKey: TalkingHomeTabTurnOnNotificationsKey)
                a_collectionName.set(true, forKey: a_inviteContent)
                //: TalkingAlertShow.alert(title: nil,
                TitleAlertShow.admittance(title: nil,
                                            //: message: "Allow %@ to send you notifications?".localizedArguments(AppName),
                                            message: String(bytes: str_addDoingTitle, encoding: .utf8)!.random(a_callValue),
                                            //: leftBtnTitle: "Cancel".localized,
                                            leftBtnTitle: (String(str_randomTitle)).localized,
                                            //: rightBtnTitle: "Settings".localized) {
                                            rightBtnTitle: (String(str_cancelTitle.prefix(4)) + "ings").localized)
                {
                    //: TalkingAlertShow.hideAlert()
                    TitleAlertShow.lastAlert()
                    //: return
                    //: } rightBlock: {
                } rightBlock: {
                    //: if let settingsUrl = URL(string: UIApplication.openSettingsURLString) {
                    if let settingsUrl = URL(string: UIApplication.openSettingsURLString) {
                        //: UIApplication.shared.open(settingsUrl)
                        UIApplication.shared.open(settingsUrl)
                    }
                }
            }
        }
    }

    /// 搜索按钮点击事件
    //: @objc private func searchButtonClick() {
    @objc private func hunt() {
        //: let searchVC = TalkingSearchTabViewController()
        let searchVC = AnalogDigitalConverterViewDelegate()
        //: self.navigationController?.pushViewController(searchVC, animated: true)
        self.navigationController?.pushViewController(searchVC, animated: true)
        //: uploadRecord.uploadRecordEvent(eventID: ClickSearchButton)
        a_textTurnName.photoOf(eventID: a_intervalName)
    }

    /// 切换到party
    //: func switchParty() {
    func modelDataImage() {
        //: categoryView.defaultSelectedIndex = 0
        categoryView.defaultSelectedIndex = 0
        //: categoryView.reloadData()
        categoryView.reloadData()
        //: pagerView.defaultSelectedIndex = 0
        pagerView.defaultSelectedIndex = 0
        //: pagerView.reloadData()
        pagerView.reloadData()
    }
}

// MARK: - NotificationCenter

//: extension TalkingSocialViewController {
extension EquilateralViewDelegate {
    /// 添加通知
    //: private func addNotification() {
    private func dragSub() {
        // 礼物首页飘屏
        //: GiftFloatViewManager.shared.addNotifications()
        UpViewManager.shared.addTitle()

        //: NotificationCenter.default.addObserver(self,
        NotificationCenter.default.addObserver(self,
                                               //: selector: #selector(setliveTipsTimer),
                                               selector: #selector(fromTimer),
                                               //: name: UPDATE_INDEX_GETCONFIG_NOTIFICATION,
                                               name: a_giftName,
                                               //: object: nil)
                                               object: nil)

        //: NotificationCenter.default.addObserver(self,
        NotificationCenter.default.addObserver(self,
                                               //: selector: #selector(stop_liveTipsTimer),
                                               selector: #selector(reinIn),
                                               //: name: DID_LOGIN_OUT_SUCCESS_NOTIFICATION,
                                               name: a_senseContent,
                                               //: object: nil)
                                               object: nil)
    }
}

// MARK: - JXPagerViewDelegate

//: extension TalkingSocialViewController: JXSegmentedViewDelegate {
extension EquilateralViewDelegate: JXSegmentedViewDelegate {
    // 点击item或滑动时【点击标题和滑动视图都会调用】
    //: func segmentedView(_ segmentedView: JXSegmentedView, didSelectedItemAt index: Int) {
    func segmentedView(_: JXSegmentedView, didSelectedItemAt index: Int) {
        //: if seleteIndex == index {
        if seleteIndex == index {
            //: return
            return
        }
        //: seleteIndex = index
        seleteIndex = index
        //: if index == 0 {
        if index == 0 {
            //: uploadRecord.uploadRecordEvent(eventID:"\(click_HomePartyTab)_\(MeasurementAppManager.share.loginUserMode.sex == Gender.male.rawValue ? "male":"female")")
            a_textTurnName.photoOf(eventID: "\(a_changeText)_\(MeasurementAppManager.share.loginUserMode.sex == SizeCustomReflectable.male.rawValue ? String(bytes: str_positionData.reversed(), encoding: .utf8)! : (String(str_dismissValue)))")
            //: }else if index == 1 {
        } else if index == 1 {
            //: let popularVC = dataVC[index] as? SocialPopularViewController
            let popularVC = dataVC[index] as? LeadingViewProtocol
            //: popularVC?.showSettingsAlertView()
            popularVC?.launchView() // 展示定位设置弹窗
            //: uploadRecord.uploadRecordEvent(eventID: DisplayNearbyListNoP)
            a_textTurnName.photoOf(eventID: a_viewText)
            //: } else if index == 2 {
        } else if index == 2 {
            //: uploadRecord.uploadRecordEvent(eventID: DisplayNewListNoP)
            a_textTurnName.photoOf(eventID: a_licenseData)
        }
    }

    // 添加该方法是为了防止首次进入应用，直接点击nearby无法初始化页面的情况 【该方法只会在点击标题时调用】
    //: func segmentedView(_ segmentedView: JXSegmentedView, didClickSelectedItemAt index: Int) {
    func segmentedView(_: JXSegmentedView, didClickSelectedItemAt index: Int) {
        // 初始点击item时，创建vc

        //: if index == 1 && !isNearbyShow {
        if index == 1 && !isNearbyShow {
            //: isNearbyShow = true
            isNearbyShow = true
        }

        //: pagerView.listContainerView.defaultSelectedIndex = index
        pagerView.listContainerView.defaultSelectedIndex = index
        //: pagerView.listContainerView.reloadData()
        pagerView.listContainerView.reloadData()
    }

    //: func segmentedView(_ segmentedView: JXSegmentedView, didScrollSelectedItemAt index: Int) {
    func segmentedView(_: JXSegmentedView, didScrollSelectedItemAt _: Int) {}
}

// MARK: - JXPagerViewDelegate

//: extension TalkingSocialViewController: JXPagingViewDelegate {
extension EquilateralViewDelegate: JXPagingViewDelegate {
    //: func pagingView(_ pagingView: JXPagingView, initListAtIndex index: Int) -> JXPagingViewListViewDelegate {
    func pagingView(_: JXPagingView, initListAtIndex index: Int) -> JXPagingViewListViewDelegate {
        //: var type = index
        var type = index
        //: if type < 0 { type = 0 }
        if type < 0 { type = 0 }
        //: if index == 1 {
        if index == 1 {
            //: isNearbyShow = true
            isNearbyShow = true
        }

        //: let popularVC = dataVC[type]
        let popularVC = dataVC[type]
        //: return popularVC as! any JXPagingViewListViewDelegate as JXPagingViewListViewDelegate
        return popularVC as! any JXPagingViewListViewDelegate as JXPagingViewListViewDelegate
    }

    //: func tableHeaderViewHeight(in pagingView: JXPagingView) -> Int {
    func tableHeaderViewHeight(in _: JXPagingView) -> Int {
        //: return 0
        return 0
    }

    //: func tableHeaderView(in pagingView: JXPagingView) -> UIView {
    func tableHeaderView(in _: JXPagingView) -> UIView {
        //: return UIView()
        return UIView()
    }

    //: func heightForPinSectionHeader(in pagingView: JXPagingView) -> Int {
    func heightForPinSectionHeader(in _: JXPagingView) -> Int {
        //: return Int(categoryView.frame.height)
        return Int(categoryView.frame.height)
    }

    //: func viewForPinSectionHeader(in pagingView: JXPagingView) -> UIView {
    func viewForPinSectionHeader(in _: JXPagingView) -> UIView {
        //: return categoryView
        return categoryView
    }

    //: func numberOfLists(in pagingView: JXPagingView) -> Int {
    func numberOfLists(in _: JXPagingView) -> Int {
        //: return titleArray.count
        return titleArray.count
    }
}

// MARK: - Layout

//: extension TalkingSocialViewController {
extension EquilateralViewDelegate {
    /// 添加视图
    //: private func setupSubviews() {
    private func loadBack() {
        // 导航底部渐变背景
        //: self.view.addSubview(pagerView)
        self.view.addSubview(pagerView)
        //: categoryView.addSubview(searchBtn)
        categoryView.addSubview(searchBtn)
        //: categoryView.addSubview(rankBtn)
        categoryView.addSubview(rankBtn)
        //: self.view.addSubview(bottomImgView)
        self.view.addSubview(bottomImgView)
        //: self.view.addSubview(liveBtn)
        self.view.addSubview(liveBtn)
        //: self.view.bringSubviewToFront(liveBtn)
        self.view.bringSubviewToFront(liveBtn)
    }

    /// 添加约束
    //: private func setupSubViewsConstraint() {
    private func setupModelSwaddlingClothesConstraint() {
        //: searchBtn.snp.makeConstraints { make in
        searchBtn.snp.makeConstraints { make in
            //: make.centerY.equalToSuperview()
            make.centerY.equalToSuperview()
            //: make.trailing.equalTo(-9)
            make.trailing.equalTo(-9)
            //: make.size.equalTo(30)
            make.size.equalTo(30)
        }
        //: rankBtn.snp.makeConstraints { make in
        rankBtn.snp.makeConstraints { make in
            //: make.centerY.equalToSuperview()
            make.centerY.equalToSuperview()
            //: make.trailing.equalTo(searchBtn.snp.leading).offset(-10)
            make.trailing.equalTo(searchBtn.snp.leading).offset(-10)
            //: make.size.equalTo(30)
            make.size.equalTo(30)
        }

        //: bottomImgView.snp.makeConstraints { make in
        bottomImgView.snp.makeConstraints { make in
            //: make.leading.top.width.equalToSuperview()
            make.leading.top.width.equalToSuperview()
            //: make.height.equalTo(145+StatusBarHeight)
            make.height.equalTo(145 + a_limitRecordScreenName)
        }
        //: liveBtn.snp.makeConstraints { make in
        liveBtn.snp.makeConstraints { make in
            //: make.bottom.width.equalTo(-122)
            make.bottom.width.equalTo(-122)
            //: make.trailing.equalTo(-25)
            make.trailing.equalTo(-25)
            //: make.size.equalTo(56)
            make.size.equalTo(56)
        }
    }
}
